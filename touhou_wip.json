[
  {
    "id": "aa_notewip",
    "type": "SPELL",
    "name": "Note",
    "description": "Stuff stored here technically works but not like I want, so replacements are used in the mod instead. I'm saving them here because they're missing a single critical component",
    "spell_class": "NONE",
    "valid_targets": [ "none" ],
    "effect": "attack",
    "shape": "blast",
    "min_damage": 1,
    "max_damage": 1,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 100,
    "base_energy_cost": 100,
    "energy_source": "MANA"
  },
  {
    "id": "wip_soulshard_eoc",
    "type": "effect_on_condition",
    "//eoc_type": "EVENT",
    "//required_event": "character_kills_monster",
    "condition": {
      "and": [ 
        { 
          "or": [ 
            { "u_has_trait": "KASHA_SPECIES" }, 
            { "u_has_trait": "KASHA_SPECIES_active" }
          ]
        },
        { 
          "or": [ 
            { "npc_has_species": "FERAL" }, 
            { "npc_has_species": "HUMAN" }, 
            { "npc_has_species": "NETHER" }, 
            { "npc_has_species": "ZOMBIE" } 
          ] 
        }
      ]
    },
    "effect": [ { "u_spawn_item": "soul_shard_item", "count": 1, "suppress_message": true } ],
    "//": "Simple EOC checks when a Kasha kills anything, if it's humanoid or close enough it grants the item",
    "//2": "Seems dots from spells are not proccing character_kills_monster events (#71408)",
    "//3": "This doesn't work as there's no proper way to limit how many shards can Kaenbyou accumulate. The optimal way would be to just remove any number of soulshards past the limit, but currently there's no EOC that can do that. I tried adding a spoils_in timer but seems the minimum time for the item to disappear is ~5 min, and also she has to drop the items from her inventory for them to actually despawn. That's clunky and leads to inventory flood and micromanagement tedium",
    "//note": " try u_consume_item to delete items/charges"
  },
  {
    "id": "soul_shard_item",
    "type": "COMESTIBLE",
    "name": { "str": "soul shard", "str_pl": "soul shards" },
    "description": "The crystallized fragment of a human soul.",
    "volume": "10 ml",
    "weight": "5 g",
    "phase": "solid",
    "material": [ "glass" ],
    "symbol": "=",
    "calories": 0,
    "color": "pink",
    "comestible_type": "INVALID",
    "spoils_in": "1 s",
    "flags": [ "INEDIBLE", "NO_AUTO_CONSUME", "NO_INGEST", "TRADER_AVOID" ]
  },
  {
    "id": "wip_rin_kaenbyou",
    "type": "profession",
    "name": " ",
    "description": " ",
    "points": 4,
    "items": {
      "both": {
        "entries": [ { "item": "wip_kaenbyou_leg_lace", "contents-group": "nested_soulshards" } ]
      }
    }
  },
  {
    "id": "wip_kaenbyou_leg_lace",
    "type": "ARMOR",
    "category": "armor",
    "name": { "str": "leg lace", "str_pl": "leg laces" },
    "copy-from": "kaenbyou_leg_lace",
    "description": " ",
    "pocket_data": [
      {
        "pocket_type": "CONTAINER",
        "max_contains_volume": "160 ml",
        "max_contains_weight": "80 g",
        "max_item_length": "20 cm",
        "volume_multiplier": 0,
        "weight_multiplier": 0,
        "moves": 50,
        "fire_protection": true,
        "spoil_multiplier": 0.0,
        "item_restriction": [ "soul_shard_item" ]
      }
    ]
  },
  {
    "id": "nested_soulshards",
    "type": "item_group",
    "subtype": "collection",
    "entries": [ { "item": "soul_shard_item", "count": [ 4, 4 ] } ]
  },
  {
    "id": "spell_components_soulshard_1",
    "type": "requirement",
    "components": [ [ [ "soul_shard_item", 1 ] ] ],
    "//": "For kaenbyou_soulfire and kaenbyou_soulshatter "
  },
  {
    "id": "spell_components_soulshard_2",
    "type": "requirement",
    "components": [ [ [ "soul_shard_item", 2 ] ] ],
    "//": "For kaenbyou_blazingwheel "
  }
]
