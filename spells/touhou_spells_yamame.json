[
  {
    "id": "yamame_curedisease",
    "type": "SPELL",
    "name": "Cure disease",
    "description": "Remove all diseases from the target.",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "self" ],
    "effect": "attack",
    "effect_str": "cure_disease",
    "shape": "blast",
    "min_range": 1,
    "max_range": 1,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 350,
    "base_energy_cost": 133,
    "energy_source": "MANA",
    "flags": [ "CONCENTRATE", "NO_LEGS", "SOMATIC" ]
  },
  {
    "id": "yamame_disease_epidemic",
    "type": "SPELL",
    "name": { "str": "Epidemic" },
    "description": "Spread the diseases of the target to nearby targets.",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "hostile" ],
    "effect": "effect_on_condition",
    "effect_str": "yamame_disease_epidemic_eoc",
    "shape": "blast",
    "max_level": 1,
    "min_range": { "math": [ "( (u_skill('speech') * 0.4 ) + (u_skill('dodge') * 0.4 ) + 5.2 )" ] },
    "max_range": 16,
    "difficulty": -11,
    "base_casting_time": 100,
    "base_energy_cost": 100,
    "energy_source": "MANA",
    "flags": [ "EXTRA_EFFECTS_FIRST", "NO_HANDS", "NO_LEGS", "SOMATIC" ],
    "//": "min range 8"
  },
  {
    "id": "yamame_disease_icypyrexia",
    "type": "SPELL",
    "name": { "str": "Disease: Icy pyrexia" },
    "description": "Infect the target with a frigid disease, causing them to suffer damage over time, while also reducing their movement speed.",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "hostile" ],
    "ignored_monster_species": [ "ROBOT" ],
    "effect": "attack",
    "effect_str": "icy_pyrexia",
    "extra_effects": [ { "id": "yamame_disease_icypyrexia2" } ],
    "shape": "blast",
    "damage_type": "cold",
    "min_dot": { "math": [ "( (u_skill('speech') * 0.15 ) + (u_skill('dodge') * 0.15 ) + 0.95 )" ] },
    "max_dot": 5,
    "min_range": { "math": [ "( (u_skill('speech') * 0.4 ) + (u_skill('dodge') * 0.4 ) + 5.2 )" ] },
    "max_range": 16,
    "min_duration": { "math": [ "( (u_skill('speech') * 30 ) + (u_skill('dodge') * 30 ) + 1290 )" ] },
    "max_duration": 2100,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 85,
    "base_energy_cost": 100,
    "energy_source": "MANA",
    "flags": [ "NO_LEGS", "SOMATIC" ],
    "//": "Sadly can't reduce attack speed too",
    "//2": "min dot 2, min range 8, min dur 1500"
  },
  {
    "id": "yamame_disease_icypyrexia2",
    "type": "SPELL",
    "name": { "str": "Disease: Icy pyrexia (EOC)" },
    "description": "Forces the target to run the EOC, which adds u_var_icypyrexia to (their) self",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "hostile" ],
    "ignored_monster_species": [ "ROBOT" ],
    "effect": "effect_on_condition",
    "effect_str": "yamame_disease_icypyrexia_eoc",
    "shape": "blast",
    "max_level": 1,
    "min_range": { "math": [ "( (u_skill('speech') * 0.4 ) + (u_skill('dodge') * 0.4 ) + 5.2 )" ] },
    "max_range": 16,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "SOMATIC" ]
  },
  {
    "id": "yamame_disease_icypyrexia3",
    "type": "SPELL",
    "name": { "str": "Disease: Icy pyrexia (epidemic)" },
    "description": "Epidemic version of yamame_disease_icypyrexia ",
    "spell_class": "NONE",
    "valid_targets": [ "ally" ],
    "ignored_monster_species": [ "ROBOT" ],
    "effect": "attack",
    "effect_str": "icy_pyrexia",
    "shape": "blast",
    "damage_type": "cold",
    "min_dot": { "math": [ "var_icypyrexia_dmg" ] },
    "max_dot": 5,
    "min_aoe": 6,
    "max_aoe": 6,
    "min_duration": { "math": [ "var_disease_duration" ] },
    "max_duration": 2100,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "SOMATIC" ],
    "//": "The vars are set at yamame_opens_spellbook_eoc "
  },
  {
    "id": "yamame_disease_scarletplague",
    "type": "SPELL",
    "name": { "str": "Disease: Scarlet plague" },
    "description": "Infect the target with a weakening plague, causing them to suffer damage over time, while also debilitating them.",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "hostile" ],
    "ignored_monster_species": [ "ROBOT" ],
    "effect": "attack",
    "effect_str": "scarlet_plague",
    "extra_effects": [ { "id": "yamame_disease_scarletplague2" } ],
    "shape": "blast",
    "damage_type": "stab",
    "min_dot": { "math": [ "( (u_skill('speech') * 0.15 ) + (u_skill('dodge') * 0.15 ) + 0.95 )" ] },
    "max_dot": 5,
    "min_range": { "math": [ "( (u_skill('speech') * 0.4 ) + (u_skill('dodge') * 0.4 ) + 5.2 )" ] },
    "max_range": 16,
    "min_duration": { "math": [ "( (u_skill('speech') * 30 ) + (u_skill('dodge') * 30 ) + 1290 )" ] },
    "max_duration": 2100,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 85,
    "base_energy_cost": 100,
    "energy_source": "MANA",
    "flags": [ "NO_LEGS", "SOMATIC" ]
  },
  {
    "id": "yamame_disease_scarletplague2",
    "type": "SPELL",
    "name": { "str": "Disease: Scarlet plague (EOC)" },
    "description": "Forces the target to run the EOC, which adds u_var_scarletplague to (their) self",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "hostile" ],
    "ignored_monster_species": [ "ROBOT" ],
    "effect": "effect_on_condition",
    "effect_str": "yamame_disease_scarletplague_eoc",
    "shape": "blast",
    "max_level": 1,
    "min_range": { "math": [ "( (u_skill('speech') * 0.4 ) + (u_skill('dodge') * 0.4 ) + 5.2 )" ] },
    "max_range": 16,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "SOMATIC" ]
  },
  {
    "id": "yamame_disease_scarletplague3",
    "type": "SPELL",
    "name": { "str": "Disease: Scarlet plague (epidemic)" },
    "description": "Epidemic version of yamame_disease_scarletplague ",
    "spell_class": "NONE",
    "valid_targets": [ "ally" ],
    "ignored_monster_species": [ "ROBOT" ],
    "effect": "attack",
    "effect_str": "scarlet_plague",
    "shape": "blast",
    "damage_type": "stab",
    "min_dot": { "math": [ "var_scarletplague_dmg" ] },
    "max_dot": 5,
    "min_aoe": 6,
    "max_aoe": 6,
    "min_duration": { "math": [ "var_disease_duration" ] },
    "max_duration": 2100,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 85,
    "base_energy_cost": 100,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "SOMATIC" ]
  },
  {
    "id": "yamame_disease_unconstrainedrot",
    "type": "SPELL",
    "name": { "str": "Disease: Unconstrained rot" },
    "description": "Cause a severe disease on the target that rots them inside out, causing them to suffer a large amount of damage over time.",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "hostile" ],
    "ignored_monster_species": [ "ROBOT" ],
    "effect": "attack",
    "effect_str": "unscontrained_rot",
    "extra_effects": [ { "id": "yamame_disease_unconstrainedrot2" }, { "id": "yamame_disease_unconstrainedrot3" } ],
    "shape": "blast",
    "damage_type": "biological",
    "min_dot": { "math": [ "( (u_skill('speech') * 0.15 ) + (u_skill('dodge') * 0.15 ) + 0.95 )" ] },
    "max_dot": 5,
    "min_range": { "math": [ "( (u_skill('speech') * 0.4 ) + (u_skill('dodge') * 0.4 ) + 5.2 )" ] },
    "max_range": 16,
    "min_duration": { "math": [ "( (u_skill('speech') * 30 ) + (u_skill('dodge') * 30 ) + 1290 )" ] },
    "max_duration": 2100,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 85,
    "base_energy_cost": 133,
    "energy_source": "MANA",
    "flags": [ "NO_LEGS", "SOMATIC" ],
    "//": "min dot 2, min range 8, min dur 1500"
  },
  {
    "id": "yamame_disease_unconstrainedrot2",
    "type": "SPELL",
    "name": { "str": "Disease: Unconstrained rot (extra dmg)" },
    "description": "Extra damage for yamame_unconstrainedfever ",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "hostile" ],
    "ignored_monster_species": [ "ROBOT" ],
    "effect": "attack",
    "shape": "blast",
    "damage_type": "acid",
    "min_dot": { "math": [ "( (u_skill('speech') * 0.15 ) + (u_skill('dodge') * 0.15 ) - 1.05 )" ] },
    "max_dot": 3,
    "min_range": { "math": [ "( (u_skill('speech') * 0.4 ) + (u_skill('dodge') * 0.4 ) + 5.2 )" ] },
    "max_range": 16,
    "min_duration": { "math": [ "( (u_skill('speech') * 30 ) + (u_skill('dodge') * 30 ) + 1290 )" ] },
    "max_duration": 2100,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_LEGS", "SILENT", "SOMATIC" ],
    "//": "min dot 0, min range 8, min dur 1500"
  },
  {
    "id": "yamame_disease_unconstrainedrot3",
    "type": "SPELL",
    "name": { "str": "Disease: Unconstrained rot (EOC)" },
    "description": "Forces the target to run the EOC, which adds u_var_unconstrainedrot to (their) self",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "hostile" ],
    "effect": "effect_on_condition",
    "effect_str": "yamame_disease_unconstrainedrot_eoc",
    "shape": "blast",
    "max_level": 1,
    "min_range": { "math": [ "( (u_skill('speech') * 0.4 ) + (u_skill('dodge') * 0.4 ) + 5.2 )" ] },
    "max_range": 16,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "SOMATIC" ]
  },
  {
    "id": "yamame_disease_unconstrainedrot4",
    "type": "SPELL",
    "name": { "str": "Disease: Unconstrained rot (epidemic)" },
    "description": "Epidemic version of yamame_disease_unconstrainedrot ",
    "spell_class": "NONE",
    "valid_targets": [ "ally" ],
    "ignored_monster_species": [ "ROBOT" ],
    "effect": "attack",
    "effect_str": "unscontrained_rot",
    "extra_effects": [ { "id": "yamame_disease_unconstrainedrot4_2" } ],
    "shape": "blast",
    "damage_type": "biological",
    "min_dot": { "math": [ "var_unconstrainedrot_dmg" ] },
    "max_dot": 5,
    "min_aoe": 6,
    "max_aoe": 6,
    "min_duration": { "math": [ "var_disease_duration" ] },
    "max_duration": 2100,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 85,
    "base_energy_cost": 133,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "SOMATIC" ]
  },
  {
    "id": "yamame_disease_unconstrainedrot4_2",
    "type": "SPELL",
    "name": { "str": "Disease: Unconstrained rot (extra dmg) (epidemic)" },
    "description": "Epidemic version of yamame_disease_unconstrainedrot2 ",
    "spell_class": "NONE",
    "valid_targets": [ "ally" ],
    "ignored_monster_species": [ "ROBOT" ],
    "effect": "attack",
    "shape": "blast",
    "damage_type": "acid",
    "min_dot": { "math": [ "var_unconstrainedrot2_dmg" ] },
    "max_dot": 3,
    "min_aoe": 6,
    "max_aoe": 6,
    "min_duration": { "math": [ "var_disease_duration" ] },
    "max_duration": 2100,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_LEGS", "SILENT", "SOMATIC" ]
  },
  {
    "id": "yamame_miasmashot",
    "type": "SPELL",
    "name": "Miasma shot",
    "description": "Discharge a cloud of miasma, damaging any enemy caught on it.",
    "spell_class": "NONE",
    "valid_targets": [ "ground", "hostile" ],
    "effect": "attack",
    "shape": "cone",
    "min_range": { "math": [ "( (u_skill('speech') * 0.4 ) + (u_skill('dodge') * 0.4 ) + 5.2 )" ] },
    "max_range": 16,
    "min_aoe": 10,
    "max_aoe": 10,
    "min_duration": 3200,
    "max_duration": 3200,
    "field_id": "fd_poison",
    "field_chance": 1,
    "min_field_intensity": { "math": [ "( (u_skill('speech') * 0.25 ) + (u_skill('dodge') * 0.25 ) - 0.75 )" ] },
    "max_field_intensity": 6,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 133,
    "base_energy_cost": 100,
    "energy_source": "MANA",
    "flags": [ "NO_LEGS", "SOMATIC" ],
    "//": "Based on Poison Water: Unsanitary Rain",
    "//2": "min range 8, min field intensity 1"
  },
  {
    "id": "yamame_damnedrope",
    "type": "SPELL",
    "name": "Damned's rope",
    "description": "Gather your strength to entangle and pull a target towards your position, stunning it for a short time.",
    "spell_class": "NONE",
    "valid_targets": [ "self" ],
    "effect": "effect_on_condition",
    "effect_str": "yamame_damnedrope_eoc",
    "shape": "blast",
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 100,
    "energy_source": "MANA",
    "flags": [ "NO_EXPLOSION_SFX", "NO_HANDS", "NO_PROJECTILE", "SILENT" ],
    "//": "Adapted from dash_kokoro. This works marginally better than the no warm-up version, see yamame_damnedrope_UPDATED at touhou_wip_spells.json for the explanation",
    "//2": "The reason why a STR buff is required for this to work is because pull_target is hardcoded to use the formula y = (10/3)*x - (20/3) (#52155), where y is the weight in kg of the target and x is the STR of the caster"
  },
  {
    "id": "yamame_damnedrope2",
    "type": "SPELL",
    "name": "Damned's rope (pull)",
    "description": "Entangle a target and pull it towards your position, stunning it for a short time.",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "hostile" ],
    "effect": "pull_target",
    "extra_effects": [ { "id": "yamame_damnedrope3" } ],
    "shape": "line",
    "min_range": { "math": [ "( (u_skill('speech') * 0.7 ) + (u_skill('dodge') * 0.7 ) + 4.1 )" ] },
    "max_range": 23,
    "field_id": "fd_web2",
    "field_chance": 1,
    "min_field_intensity": 2,
    "max_field_intensity": 3,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 33,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "EXTRA_EFFECTS_FIRST", "NO_LEGS", "SOMATIC" ],
    "//": "min range 9"
  },
  {
    "id": "yamame_damnedrope3",
    "type": "SPELL",
    "name": "Damned's rope (stun)",
    "description": "Stun component of yamame_damnedrope ",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "hostile" ],
    "effect": "mod_moves",
    "shape": "blast",
    "damage_type": "pure",
    "min_damage": -150,
    "max_damage": -300,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "RANDOM_DAMAGE", "SILENT" ]
  },
  {
    "id": "yamame_webbridge",
    "type": "SPELL",
    "name": "Web bridge",
    "description": "Weave a horizontal, thick web rope that can be used to bridge open air.",
    "spell_class": "NONE",
    "valid_targets": [ "ground" ],
    "effect": "ter_transform",
    "effect_str": "web_bridge_fur",
    "shape": "blast",
    "min_damage": 1,
    "max_damage": 1,
    "min_range": { "math": [ "( (u_skill('speech') * 0.75 ) + (u_skill('dodge') * 0.75 ) + 0.75 )" ] },
    "max_range": 21,
    "min_duration": { "math": [ "( (u_skill('speech') * 16500 ) + (u_skill('dodge') * 16500 ) - 85500 )" ] },
    "max_duration": 360000,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 200,
    "base_energy_cost": 100,
    "energy_source": "MANA",
    "flags": [ "NO_LEGS", "SOMATIC" ],
    "//": "min range 6, min dur 30000"
  },
  {
    "id": "yamame_webcapture",
    "type": "SPELL",
    "name": "Capture web",
    "description": "Immediately weave spider web over the targeted area, slowing down enemies.",
    "spell_class": "NONE",
    "valid_targets": [ "ground", "hostile" ],
    "effect": "attack",
    "shape": "blast",
    "min_range": 6,
    "max_range": 6,
    "min_aoe": { "math": [ "( (u_skill('speech') * 0.2 ) + (u_skill('dodge') * 0.2 ) + 2.6 )" ] },
    "max_aoe": 8,
    "min_duration": { "math": [ "( (u_skill('speech') * 125 ) + (u_skill('dodge') * 125 ) + 625 )" ] },
    "max_duration": 4000,
    "field_id": "fd_web",
    "field_chance": 2,
    "min_field_intensity": 1,
    "max_field_intensity": 2,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 100,
    "base_energy_cost": 133,
    "energy_source": "MANA",
    "flags": [ "NO_LEGS", "SOMATIC" ],
    "//": "Shouldn't be activated without ground",
    "//2": "min aoe 4, min dur 1500"
  },
  {
    "id": "yamame_webdismiss",
    "type": "SPELL",
    "name": "Dismiss webs",
    "description": "Dismiss webs",
    "spell_class": "NONE",
    "valid_targets": [ "field", "ground", "item", "self" ],
    "effect": "ter_transform",
    "effect_str": "web_dismiss_terfur",
    "shape": "blast",
    "min_range": { "math": [ "( (u_skill('speech') * 0.2 ) + (u_skill('dodge') * 0.2 ) + 4.6 )" ] },
    "max_range": 10,
    "min_aoe": { "math": [ "( (u_skill('speech') * 0.15 ) + (u_skill('dodge') * 0.15 ) - 0.05 )" ] },
    "max_aoe": 4,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 100,
    "base_energy_cost": 66,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "NO_PROJECTILE", "SILENT", "SOMATIC" ],
    "//": "A different approach by Standing-Storm #71310 made this and kaenbyou_dismissfire work",
    "//2": "min range 6, min aoe 1"
  },
  {
    "id": "yamame_webrappel",
    "type": "SPELL",
    "name": "Web rappel",
    "description": "Weave a vertical, thin yet very resistant string of web that can be used to descend.",
    "spell_class": "NONE",
    "valid_targets": [ "ground" ],
    "effect": "ter_transform",
    "effect_str": "web_rappel_fur",
    "shape": "blast",
    "min_damage": 1,
    "max_damage": 1,
    "min_range": 4,
    "max_range": 4,
    "min_duration": { "math": [ "( (u_skill('speech') * 16500 ) + (u_skill('dodge') * 16500 ) - 85500 )" ] },
    "max_duration": 360000,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 100,
    "base_energy_cost": 100,
    "energy_source": "MANA",
    "flags": [ "NO_LEGS", "SOMATIC" ],
    "//": "Duration should always be the same as yamame_webbridge "
  }
]
