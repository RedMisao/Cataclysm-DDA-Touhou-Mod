[
  {
    "id": "soul",
    "type": "damage_type",
    "name": "soul",
    "physical": false,
    "material_required": false,
    "magic_color": "white",
    "mon_difficulty": true,
    "ondamage_eocs": [ "soul_dmg_check_eoc" ],
    "immune_flags": { "character": [ "SOULDMG_IMMUNE" ], "monster": [ "NO_SOUL" ] },
    "//2": "soul/spiritual damage, should do no dmg to things that are not alive or lack a 'soul' component, normal dmg to the average living thing, and double (more?) to youkai & purely spiritual entities like ghosts & spiritual amalgamations (soul forced into something)",
    "//3": " 'yeah but what is a soul' lol but not lmao"
  },
  {
    "id": "soul",
    "type": "damage_info_order",
    "info_display": "detailed",
    "ablative_info": { "order": 1000, "show_type": true },
    "bionic_info": { "order": 1000, "show_type": true },
    "melee_combat_info": { "order": 1000, "show_type": true },
    "pet_prot_info": { "order": 1000, "show_type": true },
    "protection_info": { "order": 1000, "show_type": true }
  },
  {
    "id": "soul_dmg_check_eoc",
    "type": "effect_on_condition",
    "effect": [
      {
        "run_eocs": [
          {
            "id": "soul_dmg_bonus",
            "condition": {
              "and": [ 
                { "npc_has_flag": "SOULDMG_EXTRA" },
                { "math": [ "_damage_taken", ">", "0" ] }
              ]
            },
            "effect": [ 
                { "math": [ "var_souldmg", "=", "( _damage_taken * rng( 1.9, 2.1 ) )" ] },
                { "npc_cast_spell": { "id": "souldmg_spell" } }
            ]
          },
          {
            "id": "soul_dmg_rnd",
            "condition": {
              "and": [ 
                { "npc_has_flag": "SOUL_XDIMEN" },
                { "math": [ "_damage_taken", ">", "0" ] }
              ]
            },
            "effect": [ 
                { "math": [ "var_souldmg", "=", "( _damage_taken * rng( 0.1, 0.9 ) )" ] },
                { "npc_cast_spell": { "id": "souldmg_spell" } }
            ]
          }
        ]
      }
    ]
  },
  {
    "id": "souldmg_spell",
    "type": "SPELL",
    "name": { "str": "Soul dmg (extra)" },
    "description": "Bonus dmg for soul-type attacks",
    "valid_targets": [ "self" ],
    "shape": "blast",
    "effect": "attack",
    "damage_type": "pure",
    "min_damage": { "math": [ "( var_souldmg )" ] },
    "max_damage": { "math": [ "( var_souldmg )" ] },
    "min_pierce": 999,
    "max_pierce": 999,
    "max_level": 1,
    "difficulty": -50,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_FAIL", "NO_HANDS", "NO_LEGS", "NO_PROJECTILE", "SILENT" ]
  }
]
